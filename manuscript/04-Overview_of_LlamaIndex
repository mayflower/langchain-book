# Überblick über LlamaIndex

Das beliebte LlamaIndex-Projekt hieß früher GPT-Index, wurde aber erweitert, um mit mehr Modellen als nur GPT-3 zu funktionieren. Zum Beispiel können auch [Hugging Face embeddings](https://gpt-index.readthedocs.io/en/latest/how_to/embeddings.html) verwendet werden.

[LlamaIndex](https://github.com/jerryjliu/gpt_index/blob/main/docs/index.rst) ist ein Projekt, das eine zentrale Schnittstelle zur Verbindung von Sprachmodellen mit externen Daten bereitstellt. Es wurde im Herbst 2022 von Jerry Liu und seinem Team entwickelt. Es besteht aus einer Reihe von Datenstrukturen, [die die Nutzung großer externer Wissensdatenbanken mit Sprachmodellen erleichtern sollen](https://gpt-index.readthedocs.io/en/latest/index.html). Anwendungsfälle sind z.B.:

* Abfrage strukturierter Daten wie Tabellen oder Datenbanken über natürliche Sprache 
* Abrufen von relevanten Fakten oder Informationen aus großen Textkörpern
* Anreicherung von Sprachmodellen mit domänenspezifischem Wissen

LlamaIndex unterstützt eine Vielzahl von Dokumenttypen, u.a.:

* Textdokumente sind die häufigsten Dokumenttypen. Sie können in einer Vielfalt von Formaten gespeichert werden, wie z. B. .txt, .doc und .pdf.
* XML Dokumente sind Textdokumente zur Speicherung von Daten in strukturiertem Format.
* JSON-Dokumente sind Textdokumente zur Speicherung von Daten in schlankem Format.
* HTML-Dokumente sind Textdokumente zur Erstellung von Webseiten.
* PDF-Dokumente sind Textdokumente zur Speicherung von Dokumenten in einem unveränderlichen Format. 

LlamaIndex kann auch Daten indizieren, die in einer Vielzahl von Datenbanken gespeichert sind, u.a.:

* SQL-Datenbanken wie MySQL, PostgreSQL und Oracle. NoSQL-Datenbanken wie MongoDB, Cassandra und CouchDB.
* Solr ist eien beliebte Open-Source Suchmaschine mit hoher Performance und Skalierbarkeit.
* Elasticsearch ist eine weitere beliebte Open-Source Suchmaschine mit einer Vielzahl von Features, darunter Volltextsuche, Geodatensuche und Machine learning.
* Apache Cassanda ist eine NoSQL-Datenbank zur Speicherung großer Datenmengen.
* MongoDB ist eine weitere NoSQL-Datenbank, die einfach zu verwenden und skalieren ist.
* PostgreSQL ist eine relationale Datenbank, die verbreitet in Unternehmensappliaktionen verwendet wird

LlamaIndex ist ein flexibles Framework, das zur Indizierung einer Vielzahl von Dokumenttypen und Datenquellen benutzt werden kann.

Wir werden uns zuerst ein kurzes Beispiel aus der LllamaIndex-Dokumentation anschauen und später dann die Teile des LlamaIdex-Quellcodes, die LangChain verwenden.

## Verwendung von LlamaIndex für die Suche in lokalen Dokumenten mit GPT-3

Das folgende Beispiel ähnelt dem letzten Beispiel im Überblickskapitel zu LangChain. In Zeile 8 verwenden wir eine Hilfsfunktion zum Laden von Daten, die von LlamaIndex bereitgestellt wird, um Dokumente aus einem Eingabeordner zu lesen. Zur Demonstration speichern wir den Index (bestehend aus Document Embeddings) auf der Festplatte und laden ihn erneut. Diese Vorgehensweise ist nützlich, wenn man eine große Anzahl von statischen Dokumenten hat, wodurch der Indizierungsvorgang eine Weile dauern und viele OpenAI-API-Aufrufe erfordern kann. Man kann zum Beispiel viele Gigabytes an Firmendokumentation haben, die sich nicht oft ändert, sodass es sinnvoll ist, den Index nur gelegentlich neu zu erstellen.

{format: python}
![](code/04/04-test_from_docs.py)


Du hast sicherlich bemerkt, dass die in Zeile 17 definierte Abfrage dieselbe ist, die wir im vorigen Kapitel verwendet haben.

{format: console}
```
$ python test_from_docs.py

Key economic indicators are measures of economic activity that are used to assess the health of an economy. Examples of key economic indicators include gross domestic product (GDP), unemployment rate, inflation rate, consumer price index (CPI), balance of trade, and industrial production.

The effect of body chemistry on exercise depends on the type of exercise being performed. For aerobic exercise, the body needs to be able to produce enough energy to sustain the activity. This requires the body to have adequate levels of oxygen, glucose, and other nutrients in the bloodstream. For anaerobic exercise, the body needs to be able to produce energy without relying on oxygen. This requires the body to have adequate levels of lactic acid, creatine phosphate, and other energy-producing molecules. In both cases, the body's chemistry must be balanced in order for the exercise to be effective.
```

## Verwendung von LlamaIndex zur Beantwortung von Fragen aus einer Liste von Webseiten

In diesem Beispiel verwenden wir die Bibliotheken **trafilatura** und **html2text**, um Text von einer Webseite zu beziehen, um ihn zu indizieren und durchsuchen. Die Klasse **TrafilaturaWebReader** übernimmt die Erstellung lokaler Dokumente aus einer Liste von Webseiten-URIs und die Indexklasse **GPTListIndex** erstellt einen lokalen Index für die Verwendung mit OpenAI-API-Aufrufen zur Implementierung der Suche.

Das folgende Codebeispiel zeigt die Datei **web_page_QA.py**:

{format: python}
![](code/04/04-web_page_QA.py)


Dieses Beispiel ist nicht effizient, weil wir für jede Webseite, die wir durchsuchen wollen, einen neuen Index erstellen. Dennoch implementiert das Beispiel (das von einem in der LlamaIndex-Dokumentation abgeleitet wurde) ein Muster, das du beispielsweise für einen wiederverwendbaren Index für deine Firmenwebsite benutzen kannst um eine Web-Suchanwendung für Endbenutzer zu entwickeln.

Die Ergebnisse für diese drei Testfragen im letzten Codebeispiel lauten:

{format: console}
```
$ python web_page_QA.py
documents:
[Document(text='Mark Watson’s Artificial Intelligence Books and Blog\n'
'Author of 20+ books on AI and I have 50+ US patents. Here I '
'talk about both technology and provide links to read my '
'published books online.\n'
"By registering you agree to Substack's Terms of Service, our "
'Privacy Policy, and our Information Collection Notice',
doc_id='c6ed3ddd-b160-472b-9c7d-fd0446762cc8', embedding=None, doc_hash='126a335ed76d5d79ad94470dd4dd06ab5556b9f1347e5be25ecc595e0290ab57', extra_info=None)]

== QUESTION: How many patents does Mark have?

== RESPONSE:
Mark Watson has 50+ US patents.

== QUESTION: How many books has Mark written?

== RESPONSE:
Mark has written 20+ books on AI.
```

## Zusammenfassung der LlamaIndex / GPT-Index-Fallstudie

LlamaIndex ist eine Sammlung von Datenstrukturen und Bibliotheken, die entwickelt wurden, um die Verwendung großer externer Wissensbasen wie Wikipedia zu erleichtern. LlamaIndex erstellt einen vektorisierten Index aus Dokumentendaten, wodurch Abfragen äußerst effizient werden. Es verwendet dann diesen Index, um zu einer Abfrage die relevantesten Abschnitte des Dokuments zu identifizieren.

LlamaIndex ist nützlich, weil es eine zentrale Schnittstelle zwischen deinen LLMs und externen Daten sowie Verbindungen zu deinen bestehenden Datenquellen und -formaten (APIs, PDFs, docs, SQL, etc.) bereitstellt. Es bietet eine einfache, flexible Schnittstelle zwischen externen Daten und LLMs.

Projekte nutzen LlamaIndex für die Dokumentenabfrage und das Zusammenführen von Antworten aus verschiedenen Dokumenten in persönlichen Assistenten mit LlamaIndex und GPT-3.5.
